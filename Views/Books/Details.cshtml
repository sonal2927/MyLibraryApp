@model LibraryManagementSystem.Models.Book

@{
    ViewData["Title"] = "Book Details";

    // Default fallback image
    string imageSrc = "/images/books/default.jpg";

    // Check if ImageList has any valid image
    if (Model.ImageList != null && Model.ImageList.Any())
    {
        // Pick the first non-empty image name
        var firstImage = Model.ImageList.FirstOrDefault(img => !string.IsNullOrWhiteSpace(img));

        if (!string.IsNullOrEmpty(firstImage))
        {
            // If firstImage already has a path, use it directly; otherwise, prepend folder path
            imageSrc = firstImage.StartsWith("/images/") ? firstImage : "/images/books/" + firstImage;
        }
    }
}


<div class="container mt-4">
    <h2 class="mb-3">ðŸ“– @Model.Title</h2>

    <div class="row">
        <div class="col-md-4">
            <img src="@imageSrc"
                 alt="@Model.Title"
                 class="img-fluid rounded shadow-sm"
                 onerror="this.src='/images/books/default.jpg'" />
        </div>
        <div class="col-md-8">
            <p><strong>Author:</strong> @Model.Author</p>
            <p><strong>Department:</strong> @Model.Department</p>
            <p><strong>Status:</strong>
                @if (Model.IsAvailable)
                {
                    <span class="badge bg-success">Available</span>
                }
                else
                {
                    <span class="badge bg-danger">Unavailable</span>
                }
            </p>

            <a href="@Url.Action("Index", "Books")" class="btn btn-secondary mt-3">â¬… Back to Browse</a>
        </div>
    </div>
</div>
